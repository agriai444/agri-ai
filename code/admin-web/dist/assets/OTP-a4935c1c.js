import{d as N,D as O,q as T,r as d,s as V,b as P,f as k,g as s,t as o,h as t,I as f,l as h,G as U,w as y,ac as j,i as n,e as D,E,z as _}from"./index-47c41640.js";const F={class:"flex flex-col justify-center items-center gap-2 h-full"},K={class:"flex flex-col md:w-96 p-4 bg-blue-50 h-full items-center justify-center gap-4 mx-8 relative place-self-center overflow-hidden glass rounded-lg"},z={class:"text-center font-bold text-3xl gtext py-2"},A={class:"text-base text-center"},R={class:"text-primary"},q={class:"flex gap-1 justify-center items-center cursor-pointer"},H=N({__name:"OTP",setup(G){var m;const p=O(),u=((m=T().userInfo.user)==null?void 0:m.email)??"",a=d(!1),b=e=>{const r=e.indexOf("@");if(r>=0){const l=e.substring(0,r);return l.substring(0,2)+"*".repeat(l.length-2)+e.substring(r)}return e},i=d(""),w=e=>!e||/^\d+$/.test(e),c=V();function v(){}const x=P(),g=d(!0);function S(){x.start(),g.value=!1}function C(){x.finish(),g.value=!0}async function I(){try{a.value=!0,await p.verifyOTP(u,i.value),a.value=!1,S(),await j.push({name:"Chat",params:{uuid:""}}),C()}catch(e){console.error(e.message),a.value=!1,c.error(n("auth.signInFailed"))}}async function B(){try{a.value=!0,await p.reSendVerifyOTP(u),a.value=!1,c.success(" Done ")}catch(e){console.error(e.message),a.value=!1,c.error(n("auth.signInFailed"))}}return(e,r)=>(D(),k("div",F,[s("div",null,[s("div",K,[s("div",null,[s("div",z,o(t(n)("auth.emailVerification")),1),s("div",A,[f(o(t(n)("auth.sendedCode"))+" ",1),s("span",R,o(b(t(u))),1)])]),h(t(E),{class:"w-full",value:i.value,"onUpdate:value":r[0]||(r[0]=l=>i.value=l),"allow-input":w,maxlength:"6",size:"large",onInput:v,placeholder:"xxxxxx","show-button":!1,"show-count":!0,onKeyup:U(v,["enter"])},null,8,["value","onKeyup"]),h(t(_),{type:"primary",style:{width:"100%"},loading:a.value,onClick:I},{default:y(()=>[f(o(t(n)("auth.verfiy")),1)]),_:1},8,["loading"]),s("div",q,[s("span",null,o(t(n)("auth.dontRecieveCode")),1),h(t(_),{onClick:B,class:"underline text-primary"},{default:y(()=>[f(o(t(n)("auth.reSendCode")),1)]),_:1})])])])]))}});export{H as default};
