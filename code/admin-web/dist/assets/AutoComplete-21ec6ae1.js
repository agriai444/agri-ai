import{L as ee,H as A,at as te,d as ne,M as ae,au as le,n as f,av as oe,aw as se,O as V,ax as ie,k as v,ay as ue,T as re,az as de,aA as R,U as r,aB as ce,aC as fe,aD as me,B as he,aE as ve,aF as ge,aG as pe,aH as be,aI as Se,aJ as Te,aK as Ce,aL as m}from"./index-25d9365b.js";function ye(t){return t.map(M)}function M(t){var s,a;return typeof t=="string"?{label:t,value:t}:t.type==="group"?{type:"group",label:(s=t.label)!==null&&s!==void 0?s:t.name,value:(a=t.value)!==null&&a!==void 0?a:t.name,key:t.key||t.name,children:t.children.map(l=>M(l))}:t}const Fe=ee([A("auto-complete",`
 z-index: auto;
 position: relative;
 display: inline-flex;
 width: 100%;
 `),A("auto-complete-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[te({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),Re=Object.assign(Object.assign({},V.props),{to:R.propTo,menuProps:Object,bordered:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},defaultValue:{type:String,default:null},loading:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},placeholder:String,placement:{type:String,default:"bottom-start"},value:String,blurAfterSelect:Boolean,clearAfterSelect:Boolean,getShow:Function,inputProps:Object,renderOption:Function,renderLabel:Function,size:String,options:{type:Array,default:()=>[]},zIndex:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onSelect:[Function,Array],onBlur:[Function,Array],onFocus:[Function,Array],onInput:[Function,Array]}),Oe=ne({name:"AutoComplete",props:Re,setup(t){const{mergedBorderedRef:s,namespaceRef:a,mergedClsPrefixRef:i,inlineThemeDisabled:l}=ae(t),h=le(t),{mergedSizeRef:_,mergedDisabledRef:z,mergedStatusRef:k}=h,S=f(null),g=f(null),T=f(t.defaultValue),P=oe(t,"value"),C=se(P,T),d=f(!1),y=f(!1),I=V("AutoComplete","-auto-complete",Fe,ie,t,i),O=v(()=>ye(t.options)),D=v(()=>{const{getShow:e}=t;return e?e(C.value||""):!!C.value}),E=v(()=>D.value&&d.value&&!!O.value.length),N=v(()=>ue(O.value,Te("value","children")));function p(e){const{"onUpdate:value":n,onUpdateValue:o,onInput:u}=t,{nTriggerFormInput:b,nTriggerFormChange:Z}=h;o&&m(o,e),n&&m(n,e),u&&m(u,e),T.value=e,b(),Z()}function U(e){const{onSelect:n}=t,{nTriggerFormInput:o,nTriggerFormChange:u}=h;n&&m(n,e),o(),u()}function j(e){const{onBlur:n}=t,{nTriggerFormBlur:o}=h;n&&m(n,e),o()}function L(e){const{onFocus:n}=t,{nTriggerFormFocus:o}=h;n&&m(n,e),o()}function $(){y.value=!0}function K(){window.setTimeout(()=>{y.value=!1},0)}function H(e){var n,o,u;switch(e.key){case"Enter":if(!y.value){const b=(n=g.value)===null||n===void 0?void 0:n.getPendingTmNode();b&&(w(b.rawNode),e.preventDefault())}break;case"ArrowDown":(o=g.value)===null||o===void 0||o.next();break;case"ArrowUp":(u=g.value)===null||u===void 0||u.prev();break}}function w(e){(e==null?void 0:e.value)!==void 0&&(U(e.value),t.clearAfterSelect?p(null):e.label!==void 0&&p(e.label),d.value=!1,t.blurAfterSelect&&Y())}function G(){p(null)}function J(e){d.value=!0,L(e)}function q(e){d.value=!1,j(e)}function Q(e){d.value=!0,p(e)}function W(e){w(e.rawNode)}function X(e){var n;!((n=S.value)===null||n===void 0)&&n.contains(Ce(e))||(d.value=!1)}function Y(){var e,n;!((e=S.value)===null||e===void 0)&&e.contains(document.activeElement)&&((n=document.activeElement)===null||n===void 0||n.blur())}const B=v(()=>{const{common:{cubicBezierEaseInOut:e},self:{menuBoxShadow:n}}=I.value;return{"--n-menu-box-shadow":n,"--n-bezier":e}}),c=l?re("auto-complete",void 0,B,t):void 0,F=f(null),x={focus:()=>{var e;(e=F.value)===null||e===void 0||e.focus()},blur:()=>{var e;(e=F.value)===null||e===void 0||e.blur()}};return{focus:x.focus,blur:x.blur,inputInstRef:F,uncontrolledValue:T,mergedValue:C,isMounted:de(),adjustedTo:R(t),menuInstRef:g,triggerElRef:S,treeMate:N,mergedSize:_,mergedDisabled:z,active:E,mergedStatus:k,handleClear:G,handleFocus:J,handleBlur:q,handleInput:Q,handleToggle:W,handleClickOutsideMenu:X,handleCompositionStart:$,handleCompositionEnd:K,handleKeyDown:H,mergedTheme:I,cssVars:l?void 0:B,themeClass:c==null?void 0:c.themeClass,onRender:c==null?void 0:c.onRender,mergedBordered:s,namespace:a,mergedClsPrefix:i}},render(){const{mergedClsPrefix:t}=this;return r("div",{class:`${t}-auto-complete`,ref:"triggerElRef",onKeydown:this.handleKeyDown,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd},r(ce,null,{default:()=>[r(fe,null,{default:()=>{if(this.$slots.default)return me(this.$slots,"default",{handleInput:this.handleInput,handleFocus:this.handleFocus,handleBlur:this.handleBlur,value:this.mergedValue});const{mergedTheme:a}=this;return r(he,{ref:"inputInstRef",status:this.mergedStatus,theme:a.peers.Input,themeOverrides:a.peerOverrides.Input,bordered:this.mergedBordered,value:this.mergedValue,placeholder:this.placeholder,size:this.mergedSize,disabled:this.mergedDisabled,clearable:this.clearable,loading:this.loading,inputProps:this.inputProps,onClear:this.handleClear,onFocus:this.handleFocus,onUpdateValue:this.handleInput,onBlur:this.handleBlur},{suffix:()=>{var i,l;return(l=(i=this.$slots).suffix)===null||l===void 0?void 0:l.call(i)},prefix:()=>{var i,l;return(l=(i=this.$slots).prefix)===null||l===void 0?void 0:l.call(i)}})}}),r(ve,{show:this.active,to:this.adjustedTo,containerClass:this.namespace,zIndex:this.zIndex,teleportDisabled:this.adjustedTo===R.tdkey,placement:this.placement,width:"target"},{default:()=>r(ge,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>{var s;if((s=this.onRender)===null||s===void 0||s.call(this),!this.active)return null;const{menuProps:a}=this;return pe(r(Se,Object.assign({},a,{clsPrefix:t,ref:"menuInstRef",theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,"auto-pending":!0,class:[`${t}-auto-complete-menu`,this.themeClass,a==null?void 0:a.class],style:[a==null?void 0:a.style,this.cssVars],treeMate:this.treeMate,multiple:!1,renderLabel:this.renderLabel,renderOption:this.renderOption,size:"medium",onToggle:this.handleToggle})),[[be,this.handleClickOutsideMenu,void 0,{capture:!0}]])}})})]}))}});export{Oe as N};
